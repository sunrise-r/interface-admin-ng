<iad-table
    #dt
    columnResizeMode="expand"
    dataKey="id"
    selectionMode="single"
    tableStyleClass="partner-table"
    [allowUnSelectRow]="allowUnSelectRow"
    [changeTableHeight]="changeTableHeight"
    [columns]="columns"
    [doRefresh]="askToRefresh"
    [enableInfiniteScroll]="true"
    [frozenColumns]="frozenCols"
    [frozenWidth]="frozenWidth"
    [frozenRightColumns]="frozenRightCols"
    [frozenRightWidth]="frozenRightWidth"
    [lazy]="lazyLoadingEnabled"
    [loading]="loading"
    [noSortOnInit]="true"
    [reorderableColumns]="true"
    [resizableColumns]="true"
    [resize]="resize"
    [rows]="size"
    [(selection)]="selection"
    [scrollable]="true"
    [staticFrozenColumns]="staticFrozenColumns"
    [staticFrozenWidth]="staticFrozenWidth"
    [staticFrozenRightColumns]="staticFrozenRightColumns"
    [staticFrozenRightWidth]="staticFrozenRightWidth"
    [totalRecords]="totalItems"
    [unSelectRow]="unSelectRow"
    [value]="items"

    (onFilterChanged)="onFilter($event)"
    (onColResize)="onColResize($event)"
    (onColReorder)="onColReorder($event)"
    (onSort)="onSort($event)"
    (page)="updateData($event)"
    (selectionChange)="onSelectionChange($event)"
    >

    <ng-template pTemplate="colgroup" let-columns>
        <colgroup>
            <ng-template ngFor let-col [ngForOf]="columns">
                <col *ngIf="col.visible"
                     [iadTableColumnSize]="col.width"
                     [iadTableColumnSizeDisabled]="!(isColumnResizable(col))">
            </ng-template>
        </colgroup>
    </ng-template>
    <ng-template pTemplate="header" let-columns>
        <tr class="ui-column-header-row" [ngClass]="{'ui-column-filter-shown': showFilter}">
            <ng-template ngFor let-col [ngForOf]="columns">
                <th *ngIf="col.visible"
                    pResizableColumn
                    pReorderableColumn
                    [iadTableColumnSize]="col.width"
                    [pResizableColumnDisabled]="!(isColumnResizable(col))"
                    [pReorderableColumnDisabled]="!(isColumnReorderable(col))"
                    [iadTableColumnSizeDisabled]="!(isColumnResizable(col))"
                    [ngClass]="[col.style || '']">

                    <div class="ui-grid-header-label"
                         [pSortableColumn]="col.field"
                         [pSortableColumnDisabled]="!(isColumnSortable(col))"
                    >
                        <ng-container *ngIf="col.translate; then doTranslate; else noTranslate"></ng-container>
                        <ng-template #doTranslate><span>{{col.header | translate}}</span></ng-template>
                        <ng-template #noTranslate><span>{{col.header}}</span></ng-template>
                        <iad-table-sort-icon [field]="col.field"></iad-table-sort-icon>
                    </div>
                    <iad-table-header-menu
                        *ngIf="hasColumnMenu(col)"
                        [columns]="columns"
                        [column]="col"
                        [defaultSortField]="defaultSortField"
                        [groupSettingsKey]="groupSettingsKey"
                        (freeze)="onFrozenColumn($event)"></iad-table-header-menu>
                </th>
            </ng-template>
        </tr>
        <tr [hidden]="!showFilter" class="ui-column-filter-row">
            <ng-template ngFor let-col [ngForOf]="columns">
                <th *ngIf="col.visible" [ngClass]="[col.style || '']">
                    <iad-table-column-filter
                        *ngIf="col.searching"
                        [field]="col.field"
                        [resetFilter]="resetFilter"
                        (filter)="onColFilter($event, col)"
                    ></iad-table-column-filter>
                </th>
            </ng-template>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
        <tr [pSelectableRow]="rowData">
            <ng-template ngFor let-col [ngForOf]="columns">
                <td *ngIf="col.visible"
                    [ngClass]="[isColumnResizable(col) ? 'ui-resizable-column' : '', (col.style || '')]">
                    <ng-container
                        iadDataTableTdHost
                        [rowData]="rowData"
                        [col]="col"
                        [selected]="selection === rowData"
                        (manageTable)="manageTable($event.code, $event.value)"></ng-container>
                </td>
            </ng-template>
        </tr>
    </ng-template>
</iad-table>
